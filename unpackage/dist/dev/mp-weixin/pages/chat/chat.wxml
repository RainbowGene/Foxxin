<view class="data-v-6e1957d8"><free-nav-bar vue-id="6e1d75c0-1" title="Gene" showBack="{{true}}" class="data-v-6e1957d8" bind:__l="__l" vue-slots="{{['right']}}"><free-icon-btn vue-id="{{('6e1d75c0-2')+','+('6e1d75c0-1')}}" slot="right" data-event-opts="{{[['^click',[['btnMore']]]]}}" bind:click="__e" class="data-v-6e1957d8" bind:__l="__l" vue-slots="{{['default']}}"></free-icon-btn></free-nav-bar><scroll-view class="bg-light position-fixed left-0 right-0 px-3 data-v-6e1957d8" style="{{(scrollStyle)}}" scroll-y="{{true}}" scroll-top="{{slideBottom}}" show-scrollbar="{{false}}"><block wx:for="{{list}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block class="data-v-6e1957d8"><free-chat-item vue-id="{{'6e1d75c0-3-'+index}}" item="{{item}}" index="{{index}}" pretime="{{index>0?list[index-1].createtime:0}}" data-ref="chatItem" data-event-opts="{{[['^clickLong',[['chickLong']]],['^preview',[['previewImg']]]]}}" bind:clickLong="__e" bind:preview="__e" class="data-v-6e1957d8 vue-ref-in-for" bind:__l="__l"></free-chat-item></block></block></scroll-view><view data-event-opts="{{[['tap',[['clickPage',['$event']]]]]}}" hidden="{{!(mode==='action'||mode==='emoticon')}}" class="position-fixed top-0 right-0 left-0 bottom-0 _div data-v-6e1957d8" bindtap="__e"></view><free-popup vue-id="6e1d75c0-4" bodyW="{{240}}" bodyH="{{menuHeight}}" tabHeight="{{90}}" data-ref="extend" class="data-v-6e1957d8 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="popup-content data-v-6e1957d8" style="{{(menuStyle)}}"><block wx:for="{{getMenus}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="pl-3 flex-1 data-v-6e1957d8" hover-class="bg-light" data-event-opts="{{[['tap',[['clickEvent',['$0'],[[['getMenus','',index,'event']]]]]]]}}" bindtap="__e"><text class="data-v-6e1957d8">{{item.name}}</text></view></block></view></free-popup><view class="flex flex-row position-fixed right-0 left-0 border-top align-center data-v-6e1957d8" style="{{'background:#F7F7F6;'+('bottom:'+KeyboardHeight+'px;')}}"><free-icon-btn bind:click="__e" vue-id="6e1d75c0-5" data-event-opts="{{[['^click',[['switchBtn']]]]}}" class="data-v-6e1957d8" bind:__l="__l" vue-slots="{{['default']}}">{{mode==='audio'?'':''}}</free-icon-btn><view class="flex-1 data-v-6e1957d8"><block wx:if="{{mode==='audio'}}"><view data-event-opts="{{[['touchstart',[['voiceTouchStart',['$event']]]],['touchend',[['voiceTouchEnd',['$event']]]],['touchcancel',[['voiceTouchCancel',['$event']]]],['touchmove',[['voiceTouchMove',['$event']]]]]}}" class="{{['flex align-center justify-center rounded  font-md data-v-6e1957d8',isRecording?'bg-hover-light':'bg-white']}}" style="height:60rpx;width:100%;line-height:60rpx;" bindtouchstart="__e" bindtouchend="__e" bindtouchcancel="__e" bindtouchmove="__e"><text class="data-v-6e1957d8">{{isRecording?'松开 结束':'按住 说话'}}</text></view></block><block wx:if="{{mode!=='audio'}}"><textarea class="rounded bg-white font-md data-v-6e1957d8" style="height:60rpx;width:100%;line-height:60rpx;" fixed="{{true}}" adjust-position="{{false}}" data-event-opts="{{[['focus',[['txtFocus',['$event']]]],['input',[['__set_model',['','text','$event',[]]]]]]}}" value="{{text}}" bindfocus="__e" bindinput="__e"></textarea></block></view><free-icon-btn bind:click="__e" vue-id="6e1d75c0-6" data-event-opts="{{[['^click',[['openAction',['emoticon']]]]]}}" class="data-v-6e1957d8" bind:__l="__l" vue-slots="{{['default']}}"></free-icon-btn><block wx:if="{{!sendBtnShow}}"><free-icon-btn bind:click="__e" vue-id="6e1d75c0-7" data-event-opts="{{[['^click',[['openAction',['action']]]]]}}" class="data-v-6e1957d8" bind:__l="__l" vue-slots="{{['default']}}"></free-icon-btn></block><block wx:if="{{sendBtnShow}}"><view class="main-bg-color rounded mr-2 data-v-6e1957d8" hover-class="bg-chat-item" data-event-opts="{{[['tap',[['sendMsg',['text']]]]]}}" bindtap="__e"><text class="font-md text-white px-2 py-1 data-v-6e1957d8">发送</text></view></block></view><free-popup vue-id="6e1d75c0-8" Bottom="{{true}}" mask="{{false}}" data-ref="action" data-event-opts="{{[['^hide',[['e0']]]]}}" bind:hide="__e" class="data-v-6e1957d8 vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="border-top bg-light data-v-6e1957d8" style="height:550rpx;"><swiper style="height:540rpx;" indicator-dots="{{emoticonOrActionList.length>1?true:false}}" class="data-v-6e1957d8"><block wx:for="{{emoticonOrActionList}}" wx:for-item="items" wx:for-index="index" wx:key="index"><swiper-item class="swiper-item flex flex-row flex-wrap data-v-6e1957d8"><block wx:for="{{items}}" wx:for-item="item" wx:for-index="i" wx:key="i"><view data-event-opts="{{[['tap',[['actionEvent',['$0'],[[['emoticonOrActionList','',index],['','',i]]]]]]]}}" class="col-3 flex flex-column align-center justify-center data-v-6e1957d8" bindtap="__e"><image src="{{item.icon}}" mode="widthFix" class="data-v-6e1957d8"></image><text class="font text-light-muted mt-2 data-v-6e1957d8">{{item.name}}</text></view></block></swiper-item></block></swiper></view></free-popup><block wx:if="{{isRecording}}"><view class="position-fixed top-0 right-0 left-0 flex align-center justify-center data-v-6e1957d8" style="bottom:95rpx;"><view class="rounded flex flex-column align-center justify-center data-v-6e1957d8" style="width:360rpx;height:360rpx;background-color:rgba(0,0,0,0.5);"><image style="width:150rpx;height:150rpx;" src="../../static/audio/recording.gif" class="data-v-6e1957d8"></image><text class="font text-white mt-3 data-v-6e1957d8">{{unRecord?'松开手指取消发送':'手指上滑取消发送'}}</text></view></view></block></view>